{"ast":null,"code":"var _jsxFileName = \"/home/eman/ITI/push & pull technologies/my-app/src/components/LongPulling.js\";\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nconst id = Math.ceil(Math.random() * 100000);\n\nconst LongPulling = props => {\n  const [messages, setMassages] = useState([]);\n  const [input, setInput] = useState(\"\");\n  const [Name, setName] = useState(\"\");\n\n  const subscribe = messages => {\n    axios.post(`http://localhost:3000/subscribers`, {\n      id\n    }).then(res => {\n      setMassages(messages.concat(res.data));\n      subscribe(messages.concat(res.data));\n    });\n  };\n\n  useEffect(() => {\n    subscribe(messages);\n  }, []);\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    axios.post(\"http://localhost:3000/subscribers/message\", {\n      content: input,\n      name: Name\n    }).then(() => {});\n  };\n\n  const handleChange = e => {\n    const {\n      target: {\n        value\n      }\n    } = e;\n    setInput(value);\n  };\n\n  const SetName = e => {\n    const {\n      target: {\n        value\n      }\n    } = e;\n    setName(value);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }\n  }, \"Long Pulling\"), /*#__PURE__*/React.createElement(\"form\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    id: \"name\",\n    type: \"text\",\n    name: \"name\",\n    value: Name,\n    onChange: SetName,\n    placeholder: \"name...\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    id: \"content\",\n    type: \"text\",\n    name: \"content\",\n    onChange: handleChange,\n    value: input,\n    placeholder: \"message...\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    onClick: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }\n  }, \"Send\")), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }\n  }, messages.map(m => /*#__PURE__*/React.createElement(\"div\", {\n    key: m.content,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 15\n    }\n  }, m.name, \": \", m.content))))));\n};\n\nexport default LongPulling;","map":{"version":3,"sources":["/home/eman/ITI/push & pull technologies/my-app/src/components/LongPulling.js"],"names":["React","useState","useEffect","axios","id","Math","ceil","random","LongPulling","props","messages","setMassages","input","setInput","Name","setName","subscribe","post","then","res","concat","data","handleSubmit","e","preventDefault","content","name","handleChange","target","value","SetName","map","m"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\n\nconst id = Math.ceil(Math.random() * 100000);\n\nconst LongPulling = props => {\n  const [messages, setMassages] = useState([]);\n  const [input, setInput] = useState(\"\");\n  const [Name, setName] = useState(\"\");\n\n  const subscribe = messages => {\n    axios.post(`http://localhost:3000/subscribers`, { id }).then(res => {\n      setMassages(messages.concat(res.data));\n      subscribe(messages.concat(res.data));\n    });\n  };\n\n  useEffect(() => {\n    subscribe(messages);\n  }, []);\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    axios\n      .post(\"http://localhost:3000/subscribers/message\", {\n        content: input,\n        name: Name\n      })\n      .then(() => {});\n  };\n\n  const handleChange = e => {\n    const {\n      target: { value }\n    } = e;\n    setInput(value);\n  };\n\n  const SetName = e => {\n    const {\n      target: { value }\n    } = e;\n    setName(value);\n  };\n\n  return (\n    <div>\n      <h1>Long Pulling</h1>\n      <form>\n        <input\n          id=\"name\"\n          type=\"text\"\n          name=\"name\"\n          value={Name}\n          onChange={SetName}\n          placeholder=\"name...\"\n        />\n        <input\n          id=\"content\"\n          type=\"text\"\n          name=\"content\"\n          onChange={handleChange}\n          value={input}\n          placeholder=\"message...\"\n        />\n        <button type=\"submit\" onClick={handleSubmit}>\n          Send\n        </button>\n      </form>\n      <div>\n        {messages.map(m => (\n          <div key={m.content}>\n            <span>\n              <p>\n                {m.name}: {m.content}\n              </p>\n            </span>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default LongPulling;\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _jsxFileName = \"/home/eman/ITI/push & pull technologies/my-app/src/components/LongPulling.js\";\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nconst id = Math.ceil(Math.random() * 100000);\n\nconst LongPull = props => {\n  const [messages, setMassages] = useState([]);\n  const [input, setInput] = useState(\"\");\n  const [Name, setName] = useState(\"\");\n\n  const subscribe = messages => {\n    axios.post(`http://localhost:3000/subscribers`, {\n      id\n    }).then(res => {\n      setMassages(messages.concat(res.data));\n      subscribe(messages.concat(res.data));\n    });\n  };\n\n  useEffect(() => {\n    subscribe(messages);\n  }, []);\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    axios.post(\"http://localhost:3000/subscribers/message\", {\n      content: input,\n      name: Name\n    }).then(() => {});\n  };\n\n  const handleChange = e => {\n    const {\n      target: {\n        value\n      }\n    } = e;\n    setInput(value);\n  };\n\n  const SetName = e => {\n    const {\n      target: {\n        value\n      }\n    } = e;\n    setName(value);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 13\n    }\n  }, \"Long Pulling\"), /*#__PURE__*/React.createElement(\"form\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    id: \"name\",\n    type: \"text\",\n    name: \"name\",\n    value: Name,\n    onChange: SetName,\n    placeholder: \"Enter your name...\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    id: \"content\",\n    type: \"text\",\n    name: \"content\",\n    placeholder: \"Enter your message.....\",\n    onChange: handleChange,\n    value: input,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    onClick: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 17\n    }\n  }, \"Send\")), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }\n  }, messages.map(m => /*#__PURE__*/React.createElement(\"div\", {\n    key: m.content,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 33\n    }\n  }, m.name), \": \", m.content))))));\n};\n\nexport default LongPull;","map":{"version":3,"sources":["/home/eman/ITI/push & pull technologies/my-app/src/components/LongPulling.js"],"names":["React","useState","useEffect","axios","id","Math","ceil","random","LongPull","props","messages","setMassages","input","setInput","Name","setName","subscribe","post","then","res","concat","data","handleSubmit","e","preventDefault","content","name","handleChange","target","value","SetName","map","m"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\n\nconst id = Math.ceil(Math.random() * 100000);\n\nconst LongPull = (props) => {\n    const [messages, setMassages] = useState([]);\n    const [input, setInput] = useState(\"\");\n    const [Name, setName] = useState(\"\");\n\n    const subscribe = messages => {\n        axios.post(`http://localhost:3000/subscribers`, { id }).then(res => {\n            setMassages(messages.concat(res.data));\n            subscribe(messages.concat(res.data));\n        });\n    };\n\n    useEffect(() => {\n        subscribe(messages);\n    }, []);\n\n    const handleSubmit = (e) => {\n        e.preventDefault();\n        axios\n            .post(\"http://localhost:3000/subscribers/message\", {\n                content: input,\n                name: Name\n            })\n            .then(() => {});\n    };\n\n    const handleChange = (e) => {\n        const {\n            target: { value }\n        } = e;\n        setInput(value);\n    };\n\n    const SetName = (e) => {\n        const {\n            target: { value }\n        } = e;\n        setName(value);\n    };\n\n    return (\n        <div>\n            <h1>Long Pulling</h1>\n            <form>\n                <input\n                    id=\"name\"\n                    type=\"text\"\n                    name=\"name\"\n                    value={Name}\n                    onChange={SetName}\n                    placeholder=\"Enter your name...\"\n                />\n                <input\n                    id=\"content\"\n                    type=\"text\"\n                    name=\"content\"\n                    placeholder=\"Enter your message.....\"\n                    onChange={handleChange}\n                    value={input}\n                />\n                <button type=\"submit\" onClick={handleSubmit}>\n                    Send\n                </button>\n            </form>\n            <div>\n                {messages.map(m => (\n                    <div key={m.content}>\n                        <span>\n                            <p>\n                                <strong>{m.name}</strong>: {m.content}\n                            </p>\n                        </span>\n                    </div>\n                ))}\n            </div>\n        </div>\n    );\n};\n\nexport default LongPull;"]},"metadata":{},"sourceType":"module"}